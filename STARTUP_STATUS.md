# MCP é¡¹ç›®å¯åŠ¨çŠ¶æ€æŠ¥å‘Š

## ğŸ“… å¯åŠ¨æ—¶é—´
2025-07-07 22:32

## âœ… å·²æˆåŠŸå¯åŠ¨çš„æœåŠ¡

### 1. MCP Server (ç«¯å£ 8060)
- **çŠ¶æ€**: âœ… æ­£åœ¨è¿è¡Œ
- **è¿›ç¨‹ID**: 61156
- **åŠŸèƒ½**: æä¾›Personæ•°æ®ç®¡ç†å·¥å…·
- **æ•°æ®åº“**: H2å†…å­˜æ•°æ®åº“å·²åˆå§‹åŒ–ï¼ŒåŒ…å«10æ¡ç¤ºä¾‹æ•°æ®
- **å¯ç”¨å·¥å…·**:
  - `getPersonById(Long id)`
  - `getPersonsByNationality(String nationality)`
  - `getAllPersons()`
  - `countPersonsByNationality(String nationality)`

### 2. Nacos MCP Router (ç«¯å£ 8081)
- **çŠ¶æ€**: âœ… æ­£åœ¨è¿è¡Œ  
- **è¿›ç¨‹ID**: 63463
- **åŠŸèƒ½**: æä¾›MCPæœåŠ¡æ³¨å†Œä¸å‘ç°
- **æ¶æ„**: åŸºäºNacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ

## âš ï¸ å¾…å¯åŠ¨çš„æœåŠ¡

### 3. MCP Client (ç«¯å£ 8080)
- **çŠ¶æ€**: âŒ æœªå¯åŠ¨
- **åŸå› **: éœ€è¦é…ç½®DeepSeek APIå¯†é’¥
- **åŠŸèƒ½**: æä¾›AIèŠå¤©æ¥å£ï¼Œè¿æ¥MCP Serverè°ƒç”¨å·¥å…·

## ğŸ”§ æµ‹è¯•æ¥å£

### H2 æ•°æ®åº“æ§åˆ¶å°
- **URL**: http://localhost:8060/h2-console
- **JDBC URL**: `jdbc:h2:mem:testdb`
- **ç”¨æˆ·å**: `sa`
- **å¯†ç **: `password`
- **è¯´æ˜**: å¯ä»¥ç›´æ¥æŸ¥çœ‹å’Œæ“ä½œPersonè¡¨æ•°æ®

### MCP Router API
- **åŸºç¡€URL**: http://localhost:8081
- **è¯´æ˜**: æä¾›MCPæœåŠ¡çš„REST APIæ¥å£

## ğŸ“‹ å®Œæ•´å¯åŠ¨æ­¥éª¤

è¦å¯åŠ¨å®Œæ•´çš„MCPæ¼”ç¤ºç³»ç»Ÿï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š

### 1. è·å–DeepSeek APIå¯†é’¥
```bash
# è®¿é—® https://platform.deepseek.com/ æ³¨å†Œå¹¶è·å–APIå¯†é’¥
```

### 2. è®¾ç½®ç¯å¢ƒå˜é‡
```bash
export DEEPSEEK_API_KEY=your-deepseek-api-key-here
```

### 3. ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
./start-mcp-demo.sh
```

### 4. æˆ–æ‰‹åŠ¨å¯åŠ¨MCP Client
```bash
java -jar mcp-client/target/mcp-client-1.0.0.jar
```

## ğŸ¯ æ¼”ç¤ºåœºæ™¯

å®Œæ•´å¯åŠ¨åï¼Œæ‚¨å¯ä»¥ï¼š

1. **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**: å‘MCP Clientå‘é€ä¸­æ–‡æˆ–è‹±æ–‡æŸ¥è¯¢
   - "æŸ¥è¯¢æ‰€æœ‰å¾·å›½äºº"
   - "How many French people are there?"
   - "æ˜¾ç¤ºå¹´é¾„å¤§äº30çš„äººå‘˜"

2. **RESTful APIè°ƒç”¨**: ç›´æ¥è°ƒç”¨MCP Clientçš„RESTæ¥å£
   - `GET /persons/all` - è·å–æ‰€æœ‰äººå‘˜
   - `GET /persons/nationality/German` - æŒ‰å›½ç±æŸ¥è¯¢
   - `POST /persons/query` - è‡ªç„¶è¯­è¨€æŸ¥è¯¢

3. **MCPåè®®é€šä¿¡**: è§‚å¯ŸMCP Clientå’ŒServerä¹‹é—´çš„åè®®äº¤äº’

## ğŸ“Š å½“å‰æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MCP Protocol    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Client    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   MCP Server    â”‚
â”‚  (Port 8080)    â”‚                   â”‚  (Port 8060)    â”‚
â”‚                 â”‚                   â”‚                 â”‚
â”‚ - ChatClient    â”‚                   â”‚ - PersonTools   â”‚
â”‚ - REST API      â”‚                   â”‚ - H2 Database   â”‚
â”‚ - DeepSeek AI   â”‚                   â”‚ - Tool Methods  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                     â”‚
         â”‚                                     â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Nacos MCP Routerâ”‚â—„â”€â”€â”˜
                        â”‚  (Port 8081)    â”‚
                        â”‚                 â”‚
                        â”‚ - Service Reg.  â”‚
                        â”‚ - Load Balancer â”‚
                        â”‚ - Health Check  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ä¸‹ä¸€æ­¥

1. **é…ç½®APIå¯†é’¥**: è®¾ç½®DeepSeek APIå¯†é’¥
2. **å¯åŠ¨MCP Client**: å®Œæˆå®Œæ•´çš„MCPæ¼”ç¤ºç¯å¢ƒ
3. **åŠŸèƒ½æµ‹è¯•**: ä½¿ç”¨æµ‹è¯•è„šæœ¬éªŒè¯æ‰€æœ‰åŠŸèƒ½
4. **æ€§èƒ½è°ƒä¼˜**: æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®å‚æ•° 